{"remainingRequest":"/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/thread-loader/dist/cjs.js!/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/babel-loader/lib/index.js!/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/ts-loader/index.js??ref--14-3!/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/eslint-loader/index.js??ref--13-0!/Users/kharelthompson/Coding/its-lit-app UPWORK/public/src/sdk/core/session.ts","dependencies":[{"path":"/Users/kharelthompson/Coding/its-lit-app UPWORK/public/src/sdk/core/session.ts","mtime":1618831816704},{"path":"/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/cache-loader/dist/cjs.js","mtime":1618827696254},{"path":"/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/thread-loader/dist/cjs.js","mtime":1618827696331},{"path":"/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/babel-loader/lib/index.js","mtime":1618827696227},{"path":"/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/ts-loader/index.js","mtime":1618827724380},{"path":"/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/eslint-loader/index.js","mtime":1618827722778}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiL1VzZXJzL2toYXJlbHRob21wc29uL0NvZGluZy9pdHMtbGl0LWFwcCBVUFdPUksvcHVibGljL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy9raGFyZWx0aG9tcHNvbi9Db2RpbmcvaXRzLWxpdC1hcHAgVVBXT1JLL3B1YmxpYy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy9raGFyZWx0aG9tcHNvbi9Db2RpbmcvaXRzLWxpdC1hcHAgVVBXT1JLL3B1YmxpYy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZW50cmllcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tICJ0c2xpYiI7CmltcG9ydCB7IGFkZERheXMgfSBmcm9tICdkYXRlLWZucyc7CmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCB9IGZyb20gJ3J4anMnOwppbXBvcnQgeyBDb29raWVCcm93c2VyIH0gZnJvbSAnLi9jb29raWUtYnJvd3Nlcic7CmltcG9ydCB7IHNpbmdsZXRvbiB9IGZyb20gJy4vc2luZ2xldG9uJzsKCnZhciBTZXNzaW9uID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBTZXNzaW9uKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNlc3Npb24pOwoKICAgIHRoaXMuU2Vzc2lvbiA9IG5ldyBCZWhhdmlvclN1YmplY3QobnVsbCk7CiAgICB0aGlzLkNvb2tpZSA9IG5ldyBDb29raWVCcm93c2VyKCk7CiAgICB0aGlzLmZldGNoQ29va2llcygpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFNlc3Npb24sIFt7CiAgICBrZXk6ICJTZXNzaW9uVmFsdWUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLlNlc3Npb24udmFsdWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmV0Y2hDb29raWVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmZXRjaENvb2tpZXMoKSB7CiAgICAgIHRoaXMuU2Vzc2lvbi5uZXh0KHsKICAgICAgICBJZDogdGhpcy5sb2FkKCdJZCcpLAogICAgICAgIERpc3BsYXlOYW1lOiB0aGlzLmxvYWQoJ0Rpc3BsYXlOYW1lJyksCiAgICAgICAgRW1haWw6IHRoaXMubG9hZCgnRW1haWwnKQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzYXZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICBpZiAodGhpcy5TZXNzaW9uVmFsdWUpIHsKICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9PYmplY3QkZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHRoaXMuU2Vzc2lvblZhbHVlKTsgX2kgPCBfT2JqZWN0JGVudHJpZXMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgICB2YXIgaXRlbSA9IF9PYmplY3QkZW50cmllc1tfaV07CiAgICAgICAgICB0aGlzLnBlcnNpc3QoaXRlbVswXSwgaXRlbVsxXSwgYWRkRGF5cyhuZXcgRGF0ZSgpLCAxKSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogImxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWQoS2V5KSB7CiAgICAgIGlmICh0aGlzLkNvb2tpZSkgewogICAgICAgIHJldHVybiB0aGlzLkNvb2tpZS5nZXQoS2V5KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNsZWFyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLlNlc3Npb24udmFsdWUpIHsKICAgICAgICBPYmplY3Qua2V5cyh0aGlzLlNlc3Npb24udmFsdWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgcmV0dXJuIF90aGlzLkNvb2tpZS5yZW1vdmUoa2V5KTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdGhpcy5TZXNzaW9uLm5leHQobnVsbCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicGVyc2lzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcGVyc2lzdChrZXksIHZhbHVlLCBleHBpcmVzKSB7CiAgICAgIHRoaXMuQ29va2llLnNldChrZXksIF90eXBlb2YodmFsdWUpID09PSAnb2JqZWN0JyA/IEpTT04uc3RyaW5naWZ5KHZhbHVlKSA6IHZhbHVlLCB7CiAgICAgICAgZXhwaXJlczogZXhwaXJlcwogICAgICB9KTsKICAgIH0KICB9XSk7CgogIHJldHVybiBTZXNzaW9uOwp9KCk7CgpTZXNzaW9uID0gX19kZWNvcmF0ZShbc2luZ2xldG9uXSwgU2Vzc2lvbik7CmV4cG9ydCB7IFNlc3Npb24gfTs="},{"version":3,"sources":["/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/eslint-loader/index.js??ref--13-0!/Users/kharelthompson/Coding/its-lit-app UPWORK/public/src/sdk/core/session.ts"],"names":[],"mappings":";;;;;;;AAAA,SAAS,OAAT,QAAwB,UAAxB;AACA,SAAS,eAAT,QAAgC,MAAhC;AAEA,SAAS,aAAT,QAA8B,kBAA9B;AACA,SAAS,SAAT,QAA0B,aAA1B;;AAGA,IAAa,OAAb;AASE,qBAAA;AAAA;;AARO,SAAA,OAAA,GAAU,IAAI,eAAJ,CAAyC,IAAzC,CAAV;AAEC,SAAA,MAAA,GAAS,IAAI,aAAJ,EAAT;AAON,SAAK,YAAL;AACD;;AAXH;AAAA;AAAA,SAKE,eAAgB;AACd,aAAO,KAAK,OAAL,CAAa,KAApB;AACD;AAPH;AAAA;AAAA,WAaS,wBAAY;AACjB,WAAK,OAAL,CAAa,IAAb,CAAkB;AAChB,QAAA,EAAE,EAAE,KAAK,IAAL,CAAU,IAAV,CADY;AAEhB,QAAA,WAAW,EAAE,KAAK,IAAL,CAAU,aAAV,CAFG;AAGhB,QAAA,KAAK,EAAE,KAAK,IAAL,CAAU,OAAV;AAHS,OAAlB;AAKD;AAnBH;AAAA;AAAA,WAoBS,gBAAI;AACT,UAAI,KAAK,YAAT,EAAuB;AACrB,2CAAmB,MAAM,CAAC,OAAP,CAAe,KAAK,YAApB,CAAnB,qCAAsD;AAAjD,cAAM,IAAI,sBAAV;AACH,eAAK,OAAL,CAAa,IAAI,CAAC,CAAD,CAAjB,EAAsB,IAAI,CAAC,CAAD,CAA1B,EAA+B,OAAO,CAAC,IAAI,IAAJ,EAAD,EAAa,CAAb,CAAtC;AACD;;AACD,eAAO,IAAP;AACD;;AACD,aAAO,KAAP;AACD;AA5BH;AAAA;AAAA,WA6BU,cAAK,GAAL,EAAgB;AACtB,UAAI,KAAK,MAAT,EAAiB;AACf,eAAO,KAAK,MAAL,CAAY,GAAZ,CAAgB,GAAhB,CAAP;AACD;AACF;AAjCH;AAAA;AAAA,WAkCS,iBAAK;AAAA;;AACV,UAAI,KAAK,OAAL,CAAa,KAAjB,EAAwB;AACtB,QAAA,MAAM,CAAC,IAAP,CAAY,KAAK,OAAL,CAAa,KAAzB,EAAgC,OAAhC,CAAwC,UAAC,GAAD;AAAA,iBACtC,KAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,GAAnB,CADsC;AAAA,SAAxC;AAGD;;AACD,WAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB;AACD;AAzCH;AAAA;AAAA,WA0CU,iBAAQ,GAAR,EAAqB,KAArB,EAAiC,OAAjC,EAA8C;AACpD,WAAK,MAAL,CAAY,GAAZ,CACE,GADF,EAEE,QAAO,KAAP,MAAiB,QAAjB,GAA4B,IAAI,CAAC,SAAL,CAAe,KAAf,CAA5B,GAAoD,KAFtD,EAGE;AAAE,QAAA,OAAO,EAAP;AAAF,OAHF;AAKD;AAhDH;;AAAA;AAAA,GAAA;;AAAa,OAAO,GAAA,UAAA,CAAA,CADnB,SACmB,CAAA,EAAP,OAAO,CAAP;SAAA,O","sourcesContent":["import { addDays } from 'date-fns';\nimport { BehaviorSubject } from 'rxjs';\nimport { SessionModel } from '../models';\nimport { CookieBrowser } from './cookie-browser';\nimport { singleton } from './singleton';\n\n@singleton\nexport class Session {\n  public Session = new BehaviorSubject<SessionModel | null>(null);\n\n  private Cookie = new CookieBrowser();\n\n  get SessionValue() {\n    return this.Session.value;\n  }\n\n  constructor() {\n    this.fetchCookies();\n  }\n\n  public fetchCookies() {\n    this.Session.next({\n      Id: this.load('Id'),\n      DisplayName: this.load('DisplayName'),\n      Email: this.load('Email')\n    });\n  }\n  public save() {\n    if (this.SessionValue) {\n      for (const item of Object.entries(this.SessionValue)) {\n        this.persist(item[0], item[1], addDays(new Date(), 1));\n      }\n      return true;\n    }\n    return false;\n  }\n  private load(Key: string): any {\n    if (this.Cookie) {\n      return this.Cookie.get(Key);\n    }\n  }\n  public clear(): void {\n    if (this.Session.value) {\n      Object.keys(this.Session.value).forEach((key: string) =>\n        this.Cookie.remove(key)\n      );\n    }\n    this.Session.next(null);\n  }\n  private persist(key: string, value: any, expires: Date) {\n    this.Cookie.set(\n      key,\n      typeof value === 'object' ? JSON.stringify(value) : value,\n      { expires }\n    );\n  }\n}\n"],"sourceRoot":""}]}