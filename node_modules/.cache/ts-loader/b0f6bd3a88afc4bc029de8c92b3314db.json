{"remainingRequest":"/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/thread-loader/dist/cjs.js!/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/babel-loader/lib/index.js!/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/ts-loader/index.js??ref--14-3!/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/eslint-loader/index.js??ref--13-0!/Users/kharelthompson/Coding/its-lit-app UPWORK/public/src/sdk/core/singleton.ts","dependencies":[{"path":"/Users/kharelthompson/Coding/its-lit-app UPWORK/public/src/sdk/core/singleton.ts","mtime":1618831816704},{"path":"/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/cache-loader/dist/cjs.js","mtime":1618827696254},{"path":"/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/thread-loader/dist/cjs.js","mtime":1618827696331},{"path":"/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/babel-loader/lib/index.js","mtime":1618827696227},{"path":"/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/ts-loader/index.js","mtime":1618827724380},{"path":"/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/eslint-loader/index.js","mtime":1618827722778}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZmxlY3QuY29uc3RydWN0LmpzIjsKZXhwb3J0IHZhciBTSU5HTEVUT05fS0VZID0gU3ltYm9sKCdzaW5nbGV0b24nKTsKZXhwb3J0IHZhciBzaW5nbGV0b24gPSBmdW5jdGlvbiBzaW5nbGV0b24odHlwZSkgewogIHJldHVybiBuZXcgUHJveHkodHlwZSwgewogICAgLy8gdGhpcyB3aWxsIGhpamFjayB0aGUgY29uc3RydWN0b3IKICAgIGNvbnN0cnVjdDogZnVuY3Rpb24gY29uc3RydWN0KHRhcmdldCwgYXJnc0xpc3QsIG5ld1RhcmdldCkgewogICAgICAvLyB3ZSBzaG91bGQgc2tpcCB0aGUgcHJveHkgZm9yIGNoaWxkcmVuIG9mIG91ciB0YXJnZXQgY2xhc3MKICAgICAgaWYgKHRhcmdldC5wcm90b3R5cGUgIT09IG5ld1RhcmdldC5wcm90b3R5cGUpIHsKICAgICAgICByZXR1cm4gUmVmbGVjdC5jb25zdHJ1Y3QodGFyZ2V0LCBhcmdzTGlzdCwgbmV3VGFyZ2V0KTsKICAgICAgfSAvLyBpZiBvdXIgdGFyZ2V0IGNsYXNzIGRvZXMgbm90IGhhdmUgYW4gaW5zdGFuY2UsIGNyZWF0ZSBpdAoKCiAgICAgIGlmICghdGFyZ2V0W1NJTkdMRVRPTl9LRVldKSB7CiAgICAgICAgdGFyZ2V0W1NJTkdMRVRPTl9LRVldID0gUmVmbGVjdC5jb25zdHJ1Y3QodGFyZ2V0LCBhcmdzTGlzdCwgbmV3VGFyZ2V0KTsKICAgICAgfSAvLyByZXR1cm4gdGhlIGluc3RhbmNlIHdlIGNyZWF0ZWQhCgoKICAgICAgcmV0dXJuIHRhcmdldFtTSU5HTEVUT05fS0VZXTsKICAgIH0KICB9KTsKfTs="},{"version":3,"sources":["/Users/kharelthompson/Coding/its-lit-app UPWORK/public/node_modules/eslint-loader/index.js??ref--13-0!/Users/kharelthompson/Coding/its-lit-app UPWORK/public/src/sdk/core/singleton.ts"],"names":[],"mappings":";;;;AAAA,OAAO,IAAM,aAAa,GAAG,MAAM,CAAC,WAAD,CAA5B;AAMP,OAAO,IAAM,SAAS,GAAG,SAAZ,SAAY,CAAwC,IAAxC;AAAA,SACvB,IAAI,KAAJ,CAAU,IAAV,EAAgB;AACd;AACA,IAAA,SAFc,qBAEJ,MAFI,EAEkB,QAFlB,EAE4B,SAF5B,EAEqC;AACjD;AACA,UAAI,MAAM,CAAC,SAAP,KAAqB,SAAS,CAAC,SAAnC,EAA8C;AAC5C,eAAO,OAAO,CAAC,SAAR,CAAkB,MAAlB,EAA0B,QAA1B,EAAoC,SAApC,CAAP;AACD,OAJgD,CAKjD;;;AACA,UAAI,CAAC,MAAM,CAAC,aAAD,CAAX,EAA4B;AAC1B,QAAA,MAAM,CAAC,aAAD,CAAN,GAAwB,OAAO,CAAC,SAAR,CAAkB,MAAlB,EAA0B,QAA1B,EAAoC,SAApC,CAAxB;AACD,OARgD,CASjD;;;AACA,aAAO,MAAM,CAAC,aAAD,CAAb;AACD;AAba,GAAhB,CADuB;AAAA,CAAlB","sourcesContent":["export const SINGLETON_KEY = Symbol('singleton');\r\n\r\nexport type Singleton<T extends new (...args: any[]) => any> = T & {\r\n  [SINGLETON_KEY]: T extends new (...args: any[]) => infer I ? I : never;\r\n};\r\n\r\nexport const singleton = <T extends new (...args: any[]) => any>(type: T) =>\r\n  new Proxy(type, {\r\n    // this will hijack the constructor\r\n    construct(target: Singleton<T>, argsList, newTarget) {\r\n      // we should skip the proxy for children of our target class\r\n      if (target.prototype !== newTarget.prototype) {\r\n        return Reflect.construct(target, argsList, newTarget);\r\n      }\r\n      // if our target class does not have an instance, create it\r\n      if (!target[SINGLETON_KEY]) {\r\n        target[SINGLETON_KEY] = Reflect.construct(target, argsList, newTarget);\r\n      }\r\n      // return the instance we created!\r\n      return target[SINGLETON_KEY];\r\n    }\r\n  });\r\n"],"sourceRoot":""}]}